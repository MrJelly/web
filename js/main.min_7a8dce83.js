var __reflect=this&&this.__reflect||function(e,t,o){e.__class__=t,o?o.push(t):o=[t],e.__types__=e.__types__?o.concat(e.__types__):o},__extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);o.prototype=t.prototype,e.prototype=new o},__awaiter=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{h(n.next(e))}catch(t){r(t)}}function s(e){try{h(n["throw"](e))}catch(t){r(t)}}function h(e){e.done?i(e.value):new o(function(t){t(e.value)}).then(a,s)}h((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function o(e){return function(t){return n([e,t])}}function n(o){if(i)throw new TypeError("Generator is already executing.");for(;h;)try{if(i=1,r&&(a=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[0,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return h.label++,{value:o[1],done:!1};case 5:h.label++,r=o[1],o=[0];continue;case 7:o=h.ops.pop(),h.trys.pop();continue;default:if(a=h.trys,!(a=a.length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){h=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){h.label=o[1];break}if(6===o[0]&&h.label<a[1]){h.label=a[1],a=o;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(o);break}a[2]&&h.ops.pop(),h.trys.pop();continue}o=t.call(e,h)}catch(n){o=[6,n],r=0}finally{i=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var i,r,a,s,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),"throw":o(1),"return":o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},goldman;!function(e){var t=function(t){function o(){var e=t.call(this)||this;return e.once(egret.Event.ADDED_TO_STAGE,e.AddToStage,e),e}return __extends(o,t),o.prototype.AddToStage=function(e){this.init()},o.prototype.init=function(){this.skinName="GameSceneSkin",this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickStartGo,this),e.SoundManager.getInstance().PlayBGM()},o.prototype.clickStartGo=function(t){e.GameManager.getInstance().onStartGo()},o.prototype.setYinScoreText=function(e){console.log("=====score",e),this.yinTextField.text=e.toString()},o.prototype.setJinScoreText=function(e){this.jinTextField.text=e.toString()},o.prototype.setTimeText=function(e){this.timeTextField.text=e.toString()},o.prototype.destroy=function(){this.removeChild(this.jinTextField),this.removeChild(this.yinTextField),this.removeChild(this.timeTextField),this.jinTextField=null,this.yinTextField=null,this.timeTextField=null,this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickStartGo,this)},o}(eui.Component);e.GameScene=t,__reflect(t.prototype,"goldman.GameScene")}(goldman||(goldman={}));var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,o){function n(n){t.call(o,n,e)}if(RES.hasRes(e)){var i=RES.getRes(e);i?n(i):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var goldman;!function(e){var t=function(){function t(){this.missionArr=[],this.LEVEL_TIME=60,this.jinScore=0,this.yinScore=0,this.isOver=!1}return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.initGame=function(){this.missionArr=RES.getRes("mission_json"),this.gameScene=new e.GameScene,this.GameStage.addChild(this.gameScene),this.objManager=new e.ObjManager,this.GameStage.addChild(this.objManager),this.objManager.createObjs(this.missionArr),this.hookManager=new e.HookManager,this.hookManager.addEventListener(e.HookManager.HOOK_MANAGER_EVENT,this.onHookManagerEventHandler,this),this.GameStage.addChild(this.hookManager),this.hookManager.x=this.GameStage_width/2,this.hookManager.y=320,this.gameOver=new e.GameOver,this.GameStage.addEventListener(egret.Event.ENTER_FRAME,this.onGameEnterFrame,this),this.createGameTimeInterval()},t.prototype.createGameTimeInterval=function(){this.levelTimer=new egret.Timer(1e3,this.LEVEL_TIME),this.levelTimer.addEventListener(egret.TimerEvent.TIMER,this.gameTimerFunc,this),this.levelTimer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.gameTimerComFunc,this),this.levelTimer.start(),this.gameScene.setTimeText(this.LEVEL_TIME)},t.prototype.gameTimerFunc=function(t){var o=this.LEVEL_TIME-t.target.currentCount;this.gameScene.setTimeText(o),10==o&&e.SoundManager.getInstance().PlayLastSound()},t.prototype.gameTimerComFunc=function(e){this.gameScene.setTimeText(this.LEVEL_TIME-e.target.currentCount),this.onGameOver()},t.prototype.onGameOver=function(){console.log("gameOver!!!");var t=this;t.isOver=!0,t.objManager.destroy(),t.GameStage.removeChild(t.objManager);var o=setTimeout(function(){console.log("alert msgbox!!!!!"),t.GameStage.addChild(t.gameOver),t.gameOver.setScoreText(t.jinScore),t.gameOver.addEventListener(e.GameOver.CLOSE_GAMEOVER_EVENT,t.onDestroyGameOver,t),clearTimeout(o)},t,500)},t.prototype.onDestroyGameOver=function(t){this.gameOver.removeEventListener(e.GameOver.CLOSE_GAMEOVER_EVENT,this.onDestroyGameOver,this),this.GameStage.removeChild(this.gameOver)},t.prototype.destoryGameScene=function(){this.GameStage.removeChild(this.gameScene),this.gameScene.destroy(),this.GameStage.removeChild(this.objManager),this.objManager.destroy(),this.GameStage.removeChild(this.hookManager),this.hookManager.destroy(),this.GameStage.removeChild(this.gameOver),this.gameOver.destroy(),this.GameStage.removeEventListener(egret.Event.ENTER_FRAME,this.onGameEnterFrame,this),this.levelTimer.removeEventListener(egret.TimerEvent.TIMER,this.gameTimerFunc,this),this.levelTimer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.gameTimerComFunc,this),this.levelTimer.stop(),this.levelTimer=null},t.prototype.onGameEnterFrame=function(e){this.hookManager.onUpdateEnterFrame()},t.prototype.onHookManagerEventHandler=function(t){var o=t.data;switch(o.type){case e.HookManager.GO_COMPLETE_EVENT:if(this.isOver)return;var n=o.catchObj;if(n){console.log("obj.score "+n.score),0==n.type?(this.yinScore+=n.score,console.log("this.yinScore",this.yinScore),this.gameScene.setYinScoreText(this.yinScore)):1==n.type&&(this.jinScore+=n.score,this.gameScene.setJinScoreText(this.jinScore));for(var i=0;3>i;i++)e.GoldEffectUtils.createSeeds(n.type)}break;case e.HookManager.UPDATE_HOOK_POSITION_EVENT:this.hookManager.isBack||this.checkHookHitObject(o.hookBmp)}},t.prototype.updateHookBack=function(e){this.hookManager.setCatchObj(e),this.objManager.removeObj(e),e.destory()},t.prototype.checkHookHitObject=function(t){var o=this.objManager.objsArr,n=this;for(var i in o){var r=o[i],a=e.GameUtil.hitTestObjByParentObj(t,r,this.GameStage);if(a){n.hookManager.setHookBackV(r.speed),n.hookManager.setCatchObj(r),n.objManager.removeObj(r),r.destory();break}}},t.prototype.onStartGo=function(){this.hookManager.startGo()},t}();e.GameManager=t,__reflect(t.prototype,"goldman.GameManager")}(goldman||(goldman={}));var goldman;!function(e){function t(e){var t=new egret.Bitmap,o=RES.getRes(e);return t.texture=o,t}function o(e){for(;e.numChildren;)e.removeChildAt(0)}var n=function(){function e(){}return e.hitTestObjByParentObj=function(e,t,o){var n=e.getTransformedBounds(o),i=t.getTransformedBounds(o);return n.intersects(i)},e}();e.GameUtil=n,__reflect(n.prototype,"goldman.GameUtil"),e.baseUrl="http://",e.createBitmapByName=t,e.removeAllchild=o}(goldman||(goldman={}));var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.w=0,t.h=0,goldman.SoundManager.getInstance(),t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.w=egret.MainContext.instance.stage.stageWidth,this.h=egret.MainContext.instance.stage.stageHeight,console.log("====>>>",this.w,this.h),this.pgBg=new egret.Bitmap,console.log("=====>>>",RES.getRes),this.pgBg.texture=RES.getRes("PreLoadingBarBg_png"),this.pgBg.x=this.w/2-this.pgBg.width/2,this.pgBg.y=this.h/2-this.pgBg.height/2,this.addChild(this.pgBg),this.pgBar=new egret.Bitmap,this.pgBar.texture=RES.getRes("PreLoadingBar_png"),this.pgBar.x=this.w/2-this.pgBar.width/2,this.pgBar.y=this.pgBg.y+20,this.addChild(this.pgBar),this.textField=new egret.TextField,this.textField.size=24,this.textField.textColor=16777215,this.textField.bold=!0,this.textField.stroke=1,this.textField.strokeColor=0,this.addChild(this.textField),this.textField.width=100,this.textField.x=this.w/2-this.textField.width/2,this.textField.y=this.pgBg.y+20,this.textField.textAlign="center",this.textField.text="0%",console.log("======>>",this.pgBg.width),this.pgBar.width=0},t.prototype.onProgress=function(e,t){var o=Math.round(e/t*100);this.textField.text=o+"%",this.pgBar.width=this.pgBg.width*(e/t)},t}(eui.UILayer);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),goldman.GameManager.getInstance().GameStage=this.stage,console.log("=====>>>",this.stage.stageWidth,this.stage.stageHeight),goldman.GameManager.getInstance().GameStage_width=this.stage.stageWidth,goldman.GameManager.getInstance().GameStage_height=this.stage.stageHeight,egret.lifecycle.addLifecycleListener(function(e){});var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.loadResource()];case 1:return e.sent(),this.createGameScene(),console.log("========runGame"),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return o.sent(),[4,RES.loadGroup("loading")];case 2:return o.sent(),e=new LoadingUI,this.stage.addChild(e),[4,this.loadTheme()];case 3:return o.sent(),[4,RES.loadGroup("preload",0,e)];case 4:return o.sent(),this.stage.removeChild(e),console.log("========>loadResource"),[3,6];case 5:return t=o.sent(),console.error(t),[3,6];case 6:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,o){var n=new eui.Theme("resource/default.thm.json",e.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.createGameScene=function(){goldman.GameManager.getInstance().initGame()},t}(eui.UILayer);__reflect(Main.prototype,"Main");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,o,n){function i(e){t.call(n,e)}function r(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),o.call(n))}var a=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(n,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,o){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(n,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var s=e.split("/");s.pop();var h=s.join("/")+"_EUI.json";generateJSON.paths[e]?egret.callLater(function(){t.call(n,generateJSON.paths[e])},this):RES.getResByUrl(h,function(o){window.JSONParseClass.setData(o),egret.callLater(function(){t.call(n,generateJSON.paths[e])},a)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(n,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var goldman;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.once(egret.Event.ADDED_TO_STAGE,t.AddToStage,t),t}return __extends(t,e),t.prototype.AddToStage=function(e){this.init()},t.prototype.init=function(){console.log("444444444444"),this.skinName="GameOverSkin",this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},t.prototype.setScoreText=function(e){console.log("setScoreText"),this.scoreText.text=e.toString()},t.prototype.destroy=function(){console.log("dddddddddd====destroy"),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.removeChild(this.scoreText),this.removeChild(this.closeBtn),this.scoreText=null,this.closeBtn=null,this.skinName=null},t.prototype.onClose=function(){this.destroy(),this.dispatchEventWith(t.CLOSE_GAMEOVER_EVENT,!1)},t.CLOSE_GAMEOVER_EVENT="CLOSE_GAMEOVER_EVENT",t}(eui.Component);e.GameOver=t,__reflect(t.prototype,"goldman.GameOver")}(goldman||(goldman={}));var goldman;!function(e){var t=function(){function t(){}return t.createSeeds=function(t){var o,n;0==t?(o=e.createBitmapByName("coin_png"),n={x:405,y:50}):1==t&&(o=e.createBitmapByName("coin_png"),n={x:160,y:50}),e.GameManager.getInstance().GameStage.addChild(o);var i=e.GameManager.getInstance().GameStage_width/2-o.width/2,r=330,a=600,s=Math.round(40*Math.random()+1),h=Math.floor(-99*Math.random()+100),c=Math.round(4*Math.random()+1);1==c?(i-=s,r+=s):2==c?(i+=s,r-=s):3==c?(i+=s,r+=s):4==c&&(i-=s,r-=s),o.x=i,o.y=r;var l=function(){e.GameManager.getInstance().GameStage.contains(o)&&(e.GameManager.getInstance().GameStage.removeChild(o),o=null)},g=function(){egret.Tween.get(o).to({alpha:0},500).call(l,this)};o.visible=!0,egret.Tween.get(o).wait(h).to({y:420,alpha:1},300,egret.Ease.sineIn).wait(100).to({x:n.x,y:n.y,alpha:1},a,egret.Ease.sineOut).call(g,this)},t.showTips=function(t,o){void 0===t&&(t=""),void 0===o&&(o=!1);var n=new egret.TextField;n.size=36,n.y=300,o?n.textColor=16764227:n.textColor=16764227,n.alpha=0,n.text=t,n.strokeColor=15229006,n.x=e.GameManager.getInstance().GameStage_width/2+50,n.stroke=2,n.textAlign=egret.HorizontalAlign.CENTER,e.GameManager.getInstance().GameStage.contains(n)||e.GameManager.getInstance().GameStage.addChild(n),n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,n.scaleX=0,n.scaleY=0;var i=function(){e.GameManager.getInstance().GameStage.contains(n)&&(e.GameManager.getInstance().GameStage.removeChild(n),n=null)};egret.Tween.get(n).to({scaleX:1.3,scaleY:1.3,alpha:1},200).wait(200).to({y:0,alpha:0},600,egret.Ease.sineOut).call(i,this)},t}();e.GoldEffectUtils=t,__reflect(t.prototype,"goldman.GoldEffectUtils")}(goldman||(goldman={}));var goldman;!function(e){var t=function(t){function o(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(o,t),o.prototype.onAddToStage=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.line=new egret.Shape,this.addChild(this.line),this._hookBmp=e.createBitmapByName("hook_png"),this.addChild(this._hookBmp)},o.prototype.repalceStr=function(e){var t=/_/g,o="back_",n=e.replace(t,"_"+o);return console.log("_str====",n),n},o.prototype.setBackHookType=function(t){void 0===t&&(t=""),t?(this._backHookBmp=e.createBitmapByName(this.repalceStr(t)),this.addChild(this._backHookBmp),this._backHookBmp.x=this._hookBmp.x,this._backHookBmp.y=this._hookBmp.y,this._hookBmp.visible=!1):(this._backHookBmp&&this.contains(this._backHookBmp)&&(this.removeChild(this._backHookBmp),this._backHookBmp=null),this._hookBmp.visible=!0)},o.prototype.redrawHook=function(e){void 0===e&&(e=0),this._hookBmp.y=e,this.line.graphics.clear(),this.line.graphics.lineStyle(8,16777215),this.line.graphics.moveTo(0,0),this.line.graphics.lineTo(0,e),this.line.graphics.endFill(),this._hookBmp.x=-this._hookBmp.width/2,this._backHookBmp&&(this._backHookBmp.y=e,this._backHookBmp.x=-this._backHookBmp.width/2)},Object.defineProperty(o.prototype,"hookBmp",{get:function(){return this._hookBmp},enumerable:!0,configurable:!0}),o.prototype.destroy=function(){this.removeChild(this.line),this.line=null,this.removeChild(this._hookBmp),this._hookBmp=null,this._backHookBmp&&this.contains(this._backHookBmp)&&(this.removeChild(this._backHookBmp),this._backHookBmp=null)},o}(egret.Sprite);e.Hook=t,__reflect(t.prototype,"goldman.Hook")}(goldman||(goldman={}));var goldman;!function(e){var t=function(t){function o(){var e=t.call(this)||this;return e.BASE_ROTATION_MAX=60,e.LINE_HEIGHT_DEFAULT=30,e.GO_V_DEFAULT=8,e.BACK_V_DEFAULT=10,e.isGo=!1,e.isBack=!1,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(o,t),o.prototype.onAddToStage=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.createHook(),this.lineHeight=this.LINE_HEIGHT_DEFAULT,this.hook.redrawHook(this.LINE_HEIGHT_DEFAULT),this.startRotate()},o.prototype.createHook=function(){this.hook=new e.Hook,this.addChild(this.hook),this.goV=this.GO_V_DEFAULT,this.backV=this.BACK_V_DEFAULT},o.prototype.onUpdateEnterFrame=function(){this.onUpdateRotation(),this.isGo&&this.onUpdateGo()},o.prototype.startRotate=function(){this.direction="left"},o.prototype.onUpdateRotation=function(){"left"==this.direction?this.hook.rotation+=1.5:"right"==this.direction&&(this.hook.rotation-=1.5),"stop"!=this.direction&&(this.hook.rotation<-this.BASE_ROTATION_MAX?this.direction="left":this.hook.rotation>this.BASE_ROTATION_MAX&&(this.direction="right"))},o.prototype.startGo=function(){this.isGo=!0,this.direction="stop",e.SoundManager.getInstance().PlayPull()},o.prototype.onUpdateGo=function(){var t=this.goV;if(this.isBack&&(t=-this.backV),this.lineHeight+=t,this.hook.redrawHook(this.lineHeight),this.dispatchEventWith(o.HOOK_MANAGER_EVENT,!1,{type:o.UPDATE_HOOK_POSITION_EVENT,hook:this.hook,hookBmp:this.hook.hookBmp}),this.lineHeight<this.LINE_HEIGHT_DEFAULT&&this.goComplete(),!this.isBack){var n=this.getHookPoint();(n.x<0||n.x>e.GameManager.getInstance().GameStage_width||n.y>e.GameManager.getInstance().GameStage_height)&&(this.isBack=!0,this.backV=this.BACK_V_DEFAULT)}},o.prototype.getHookPoint=function(){return this.hook.localToGlobal(this.hook.hookBmp.x,this.hook.hookBmp.y)},o.prototype.setHookBackV=function(t){console.log("backV===",t);var o=this;if(o.isBack=!0,e.SoundManager.getInstance().StopPull(),e.SoundManager.getInstance().PlayDig(),o.backV=0,t>0)var n=setInterval(function(){o.backV=o.backV+1,o.backV>=t&&clearInterval(n)},40)},o.prototype.goComplete=function(){this.dispatchEventWith(o.HOOK_MANAGER_EVENT,!1,{type:o.GO_COMPLETE_EVENT,catchObj:this.catchObj}),this.hook.setBackHookType(),this.lineHeight=this.LINE_HEIGHT_DEFAULT,this.hook.redrawHook(this.lineHeight),this.isGo=!1,this.isBack=!1,this.startRotate(),this.catchObj=null,e.SoundManager.getInstance().StopDig(),e.SoundManager.getInstance().StopPull()},o.prototype.setCatchObj=function(e){this.catchObj=e;var t=e.image;console.log("catchObj.type: "+t),this.hook.setBackHookType(t)},o.prototype.destroy=function(){console.log("删除hook"),this.hook.destroy(),this.removeChild(this.hook),this.hook=null,this.catchObj=null},o.HOOK_MANAGER_EVENT="HOOK_MANAGER_EVENT",o.GO_COMPLETE_EVENT="GO_COMPLETE_EVENT",o.UPDATE_HOOK_POSITION_EVENT="UPDATE_HOOK_POSITION_EVENT",o}(egret.Sprite);e.HookManager=t,__reflect(t.prototype,"goldman.HookManager")}(goldman||(goldman={}));var goldman;!function(e){var t=function(){function e(){this.loader=new egret.URLLoader}return e.create=function(){return new e},e.prototype.success=function(e,t){return void 0===t&&(t=null),this.loader.addEventListener(egret.Event.COMPLETE,function(o){var n=o.target;e.call(t,n.data)},t),this},e.prototype.error=function(e,t){return void 0===t&&(t=null),this.loader.addEventListener(egret.IOErrorEvent.IO_ERROR,e,t),this},e.prototype.add=function(e){return this.variables||(this.variables=new egret.URLVariables),this.variables.decode(e),this},e.prototype.dataFormat=function(e){return this.loader.dataFormat=e,this},e.prototype.get=function(e){var t=new egret.URLRequest(e);this.variables&&(t.data=this.variables),this.loader.load(t)},e.prototype.post=function(e){var t=new egret.URLRequest(e);t.method=egret.URLRequestMethod.POST,this.variables&&(t.data=this.variables),this.loader.load(t)},e}();e.Http=t,__reflect(t.prototype,"goldman.Http")}(goldman||(goldman={}));var goldman;!function(e){var t=function(){function e(){}return e}();__reflect(t.prototype,"Seeds");var o=function(t){function o(e){var o=t.call(this)||this;return o._seeds=e,o.addEventListener(egret.Event.ADDED_TO_STAGE,o.onAddToStage,o),o}return __extends(o,t),o.prototype.onAddToStage=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.objBmp=e.createBitmapByName(this._seeds.image),this.addChild(this.objBmp),this.x=this._seeds.posX,this.y=this._seeds.posY;var o=new egret.TextField;this.addChild(o),o.textAlign=egret.HorizontalAlign.LEFT,o.textColor=16777215,o.width=22,o.size=18,o.text=this._seeds.score.toString()},o.prototype.removeFromParent=function(){this.parent.removeChild(this)},Object.defineProperty(o.prototype,"score",{get:function(){return this._seeds.score},set:function(e){this._seeds.score=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"speed",{get:function(){return this._seeds.speed},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"image",{get:function(){return this._seeds.image},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"type",{get:function(){return this._seeds.type},enumerable:!0,configurable:!0}),o.prototype.destory=function(){console.log("物体销毁"),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),e.removeAllchild(this)},o}(egret.Sprite);e.Obj=o,__reflect(o.prototype,"goldman.Obj")}(goldman||(goldman={}));var goldman;!function(e){var t=function(t){function o(){var e=t.call(this)||this;return e._objsArr=[],e}return __extends(o,t),o.prototype.createObjs=function(t){for(var o=0;o<t.length;o++){var n=t[o],i=new e.Obj(n);this._objsArr.push(i),this.addChild(i)}},Object.defineProperty(o.prototype,"objsArr",{get:function(){return this._objsArr},enumerable:!0,configurable:!0}),o.prototype.removeObj=function(e){console.log("从数组中removeObj");var t=this._objsArr.splice(this._objsArr.indexOf(e),1)[0];return this.removeChild(t),t},o.prototype.destroy=function(){for(var e in this._objsArr){var t=this._objsArr[e];this.removeChild(t),t.destory()}this._objsArr=[]},o.OBJ_MANAGER_EVENT="OBJ_MANAGER_EVENT",o}(egret.Sprite);e.ObjManager=t,__reflect(t.prototype,"goldman.ObjManager")}(goldman||(goldman={}));var goldman;!function(e){var t=function(){function e(){this._click=new egret.Sound,this._click.load("resource/sound/button.mp3"),this._bgm=new egret.Sound,this._bgm.load("resource/sound/bgm.mp3"),this._score=new egret.Sound,this._score.load("resource/sound/score.mp3"),this._pull=new egret.Sound,this._pull.load("resource/sound/pull.mp3"),this._dig=new egret.Sound,this._dig.load("resource/sound/dig.mp3"),this._lastsound=new egret.Sound,this._lastsound.load("resource/sound/last-10s-sound.mp3")}return e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},e.prototype.PlayBGM=function(){this.IsMusic&&(this._bgm_channel=this._bgm.play(0,0))},e.prototype.StopBGM=function(){null!=this._bgm_channel&&this._bgm_channel.stop()},e.prototype.PlayClick=function(){this.IsSound&&this._click.play(0,1)},e.prototype.PlayScore=function(){this.IsSound&&this._score.play(0,1)},e.prototype.PlayPull=function(){this.IsSound&&(this._pull_channel=this._pull.play(0,0))},e.prototype.StopPull=function(){null!=this._pull_channel&&this._pull_channel.stop()},e.prototype.PlayDig=function(){this.IsSound&&(this._dig_channel=this._dig.play(0,0))},e.prototype.StopDig=function(){null!=this._dig_channel&&this._dig_channel.stop()},e.prototype.PlayLastSound=function(){this.IsSound&&this._lastsound.play(0,1)},Object.defineProperty(e.prototype,"IsMusic",{get:function(){var e=egret.localStorage.getItem("ismusic");return null==e||""==e?!0:"1"==e},set:function(e){e?(egret.localStorage.setItem("ismusic","1"),this.PlayBGM()):(egret.localStorage.setItem("ismusic","0"),this.StopBGM())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsSound",{get:function(){var e=egret.localStorage.getItem("isSound");return null==e||""==e?!0:"1"==e},set:function(e){e?egret.localStorage.setItem("isSound","1"):egret.localStorage.setItem("isSound","0")},enumerable:!0,configurable:!0}),e}();e.SoundManager=t,__reflect(t.prototype,"goldman.SoundManager")}(goldman||(goldman={}));