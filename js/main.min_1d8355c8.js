var __reflect=this&&this.__reflect||function(t,e,o){t.__class__=e,o?o.push(e):o=[e],t.__types__=t.__types__?o.concat(t.__types__):o},__extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);o.prototype=e.prototype,t.prototype=new o},__awaiter=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{h(n.next(t))}catch(e){r(e)}}function s(t){try{h(n["throw"](t))}catch(e){r(e)}}function h(t){t.done?i(t.value):new o(function(e){e(t.value)}).then(a,s)}h((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function o(t){return function(e){return n([t,e])}}function n(o){if(i)throw new TypeError("Generator is already executing.");for(;h;)try{if(i=1,r&&(a=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[0,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return h.label++,{value:o[1],done:!1};case 5:h.label++,r=o[1],o=[0];continue;case 7:o=h.ops.pop(),h.trys.pop();continue;default:if(a=h.trys,!(a=a.length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){h=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){h.label=o[1];break}if(6===o[0]&&h.label<a[1]){h.label=a[1],a=o;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(o);break}a[2]&&h.ops.pop(),h.trys.pop();continue}o=e.call(t,h)}catch(n){o=[6,n],r=0}finally{i=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var i,r,a,s,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),"throw":o(1),"return":o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},goldman;!function(t){var e=function(e){function o(t,o,n){var i=e.call(this)||this;return i.name=Math.floor(9999999999*Math.random()).toString(),i._type=t,i._money=Number(o),i._backV=Number(n),i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAddToStage,i),i}return __extends(o,e),o.prototype.onAddToStage=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.objBmp=t.createBitmapByName(this._type),this.addChild(this.objBmp);var o=new egret.TextField;this.addChild(o),o.textAlign=egret.HorizontalAlign.LEFT,o.textColor=0,o.width=22,o.size=18,o.text=this._money.toString()},o.prototype.overObject=function(){},Object.defineProperty(o.prototype,"money",{get:function(){return this._money},set:function(t){this._money=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"backV",{get:function(){return this._backV},set:function(t){this._backV=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),o.prototype.destory=function(){console.log("物体销毁"),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),t.removeAllchild(this)},o}(egret.Sprite);t.Obj=e,__reflect(e.prototype,"goldman.Obj")}(goldman||(goldman={}));var goldman;!function(t){var e=function(e){function o(){var t=e.call(this)||this;return t.once(egret.Event.ADDED_TO_STAGE,t.AddToStage,t),t}return __extends(o,e),o.prototype.AddToStage=function(t){console.log("AddToStage"),this.init()},o.prototype.init=function(){console.log("GameSceneSkin"),this.skinName="GameSceneSkin",this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickStartGo,this),t.SoundManager.getInstance().PlayBGM()},o.prototype.clickStartGo=function(e){t.GameManager.getInstance().onStartGo()},o.prototype.setScoreText=function(t){this.scoreTextField.text=t.toString()},o.prototype.setGoalText=function(t){this.goalTextField.text=t.toString()},o.prototype.setTimeText=function(t){this.timeTextField.text=t+"s"},o.prototype.destroy=function(){this.removeChild(this.scoreTextField),this.removeChild(this.goalTextField),this.removeChild(this.timeTextField),this.scoreTextField=null,this.goalTextField=null,this.timeTextField=null,this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickStartGo,this)},o}(eui.Component);t.GameScene=e,__reflect(e.prototype,"goldman.GameScene")}(goldman||(goldman={}));var goldman;!function(t){var e=function(){function e(){this.levelArr=[],this.currLevel=1,this.money=0,this.LEVEL_TIME=60,this.isOver=!1}return e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},e.prototype.initGame=function(){this.levelArr=RES.getRes("Level_json"),this.gameScene=new t.GameScene,this.GameStage.addChild(this.gameScene),this.gameScene.setGoalText(this.levelArr[this.currLevel-1].goal),this.objManager=new t.ObjManager,this.GameStage.addChild(this.objManager),this.objManager.createObjs(this.levelArr[this.currLevel-1].objsArr),this.hookManager=new t.HookManager,this.hookManager.addEventListener(t.HookManager.HOOK_MANAGER_EVENT,this.onHookManagerEventHandler,this),this.GameStage.addChild(this.hookManager),this.hookManager.x=this.GameStage_width/2,this.hookManager.y=158,this.gameOver=new t.GameOver,this.GameStage.addEventListener(egret.Event.ENTER_FRAME,this.onGameEnterFrame,this),this.createGameTimeInterval()},e.prototype.createGameTimeInterval=function(){this.levelTimer=new egret.Timer(1e3,this.LEVEL_TIME),this.levelTimer.addEventListener(egret.TimerEvent.TIMER,this.gameTimerFunc,this),this.levelTimer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.gameTimerComFunc,this),this.levelTimer.start(),this.gameScene.setTimeText(this.LEVEL_TIME)},e.prototype.gameTimerFunc=function(e){var o=this.LEVEL_TIME-e.target.currentCount;this.gameScene.setTimeText(o),10==o&&t.SoundManager.getInstance().PlayLastSound()},e.prototype.gameTimerComFunc=function(t){this.gameScene.setTimeText(this.LEVEL_TIME-t.target.currentCount),this.onGameOver()},e.prototype.onGameOver=function(){console.log("gameOver!!!");var e=this;e.isOver=!0,e.objManager.destroy(),e.GameStage.removeChild(e.objManager);var o=setTimeout(function(){console.log("alert msgbox!!!!!"),e.GameStage.addChild(e.gameOver),e.gameOver.setScoreText(e.money),e.gameOver.addEventListener(t.GameOver.CLOSE_GAMEOVER_EVENT,e.onDestroyGameOver,e),clearTimeout(o)},e,500)},e.prototype.onDestroyGameOver=function(e){this.gameOver.removeEventListener(t.GameOver.CLOSE_GAMEOVER_EVENT,this.onDestroyGameOver,this),this.GameStage.removeChild(this.gameOver)},e.prototype.destoryGameScene=function(){this.GameStage.removeChild(this.gameScene),this.gameScene.destroy(),this.GameStage.removeChild(this.objManager),this.objManager.destroy(),this.GameStage.removeChild(this.hookManager),this.hookManager.destroy(),this.GameStage.removeChild(this.gameOver),this.gameOver.destroy(),this.GameStage.removeEventListener(egret.Event.ENTER_FRAME,this.onGameEnterFrame,this),this.levelTimer.removeEventListener(egret.TimerEvent.TIMER,this.gameTimerFunc,this),this.levelTimer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.gameTimerComFunc,this),this.levelTimer.stop(),this.levelTimer=null},e.prototype.onGameEnterFrame=function(t){this.hookManager.onUpdateEnterFrame()},e.prototype.onHookManagerEventHandler=function(e){var o=e.data;switch(o.type){case t.HookManager.GO_COMPLETE_EVENT:if(this.isOver)return;var n=o.catchObj;if(n){console.log("obj.money "+n.money),this.money+=n.money,this.gameScene.setScoreText(this.money);for(var i=0;3>i;i++)t.GoldEffectUtils.createImg()}break;case t.HookManager.UPDATE_HOOK_POSITION_EVENT:this.hookManager.isBack||this.checkHookHitObject(o.hookBmp)}},e.prototype.updateHookBack=function(t){this.hookManager.setCatchObj(t),this.objManager.removeObj(t),t.destory()},e.prototype.checkHookHitObject=function(e){var o=this.objManager.objsArr,n=this;for(var i in o){var r=o[i],a=t.GameUtil.hitTestObjByParentObj(e,r,this.GameStage);if(a){if("TNT"==r.type)n.hookManager.setHookBackV(0),n.objManager.removeObjsAtAreaByHitObj(r),r.overObject(),setTimeout(function(){n.hookManager.setHookBackV(r.backV),n.hookManager.setCatchObj(r),r.destory()},300);else{n.hookManager.setHookBackV(r.backV);var s=n.hookManager.getHookPoint();egret.Tween.get(r).to({x:s.x,y:s.y},100,egret.Ease.sineIn).call(function(){n.hookManager.setCatchObj(r),n.objManager.removeObj(r),r.destory()})}break}}},e.prototype.onStartGo=function(){this.hookManager.startGo()},e}();t.GameManager=e,__reflect(e.prototype,"goldman.GameManager")}(goldman||(goldman={}));var goldman;!function(t){function e(t){var e=new egret.Bitmap,o=RES.getRes(t);return e.texture=o,e}function o(t){for(;t.numChildren;)t.removeChildAt(0)}var n=function(){function t(){}return t.hitTestObjByParentObj=function(t,e,o){var n=t.getTransformedBounds(o),i=e.getTransformedBounds(o);return n.intersects(i)},t}();t.GameUtil=n,__reflect(n.prototype,"goldman.GameUtil"),t.baseUrl="http://",t.sounds={pull:"pull_mp3",bg:"level-bg_mp3"},t.createBitmapByName=e,t.removeAllchild=o}(goldman||(goldman={}));var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.w=0,e.h=0,goldman.SoundManager.getInstance(),e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.w=egret.MainContext.instance.stage.stageWidth,this.h=egret.MainContext.instance.stage.stageHeight,console.log("====>>>",this.w,this.h),this.pgBg=new egret.Bitmap,console.log("=====>>>",RES.getRes),this.pgBg.texture=RES.getRes("PreLoadingBarBg_png"),this.pgBg.x=this.w/2-this.pgBg.width/2,this.pgBg.y=this.h/2-this.pgBg.height/2,this.addChild(this.pgBg),this.pgBar=new egret.Bitmap,this.pgBar.texture=RES.getRes("PreLoadingBar_png"),this.pgBar.x=this.w/2-this.pgBar.width/2,this.pgBar.y=this.pgBg.y+20,this.addChild(this.pgBar),this.textField=new egret.TextField,this.textField.size=24,this.textField.textColor=16777215,this.textField.bold=!0,this.textField.stroke=1,this.textField.strokeColor=0,this.addChild(this.textField),this.textField.width=100,this.textField.x=this.w/2-this.textField.width/2,this.textField.y=this.pgBg.y+20,this.textField.textAlign="center",this.textField.text="0%",this.pgBar.width=0},e.prototype.onProgress=function(t,e){var o=Math.round(t/e*100);this.textField.text=o+"%",this.pgBar.width=641*(t/e)},e}(eui.UILayer);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),goldman.GameManager.getInstance().GameStage=this.stage,console.log("=====>>>",this.stage.stageWidth,this.stage.stageHeight),goldman.GameManager.getInstance().GameStage_width=this.stage.stageWidth,goldman.GameManager.getInstance().GameStage_height=this.stage.stageHeight,egret.lifecycle.addLifecycleListener(function(t){});var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResource()];case 1:return t.sent(),this.createGameScene(),console.log("========runGame"),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return o.sent(),[4,RES.loadGroup("loading")];case 2:return o.sent(),t=new LoadingUI,this.stage.addChild(t),[4,this.loadTheme()];case 3:return o.sent(),[4,RES.loadGroup("preload",0,t)];case 4:return o.sent(),this.stage.removeChild(t),console.log("========>loadResource"),[3,6];case 5:return e=o.sent(),console.error(e),[3,6];case 6:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,o){var n=new eui.Theme("resource/default.thm.json",t.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.createGameScene=function(){goldman.GameManager.getInstance().initGame()},e}(eui.UILayer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,o,n){function i(t){e.call(n,t)}function r(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),o.call(n))}var a=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){e.call(n,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(t,o){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(n,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(t.indexOf(".exml")>-1){var s=t.split("/");s.pop();var h=s.join("/")+"_EUI.json";generateJSON.paths[t]?egret.callLater(function(){e.call(n,generateJSON.paths[t])},this):RES.getResByUrl(h,function(o){window.JSONParseClass.setData(o),egret.callLater(function(){e.call(n,generateJSON.paths[t])},a)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){e.call(n,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var goldman;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)},e}(egret.Sprite);t.BombBtn=e,__reflect(e.prototype,"goldman.BombBtn")}(goldman||(goldman={}));var goldman;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.once(egret.Event.ADDED_TO_STAGE,e.AddToStage,e),e}return __extends(e,t),e.prototype.AddToStage=function(t){this.init()},e.prototype.init=function(){console.log("444444444444"),this.skinName="GameOverSkin",this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},e.prototype.setScoreText=function(t){console.log("setScoreText"),this.scoreText.text=t.toString()},e.prototype.destroy=function(){console.log("dddddddddd====destroy"),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.removeChild(this.scoreText),this.removeChild(this.closeBtn),this.scoreText=null,this.closeBtn=null,this.skinName=null},e.prototype.onClose=function(){this.destroy(),this.dispatchEventWith(e.CLOSE_GAMEOVER_EVENT,!1)},e.CLOSE_GAMEOVER_EVENT="CLOSE_GAMEOVER_EVENT",e}(eui.Component);t.GameOver=e,__reflect(e.prototype,"goldman.GameOver")}(goldman||(goldman={}));var goldman;!function(t){var e=function(t){function e(e,o){return t.call(this,"Gold1",e,o)||this}return __extends(e,t),e}(t.Obj);t.Gold1=e,__reflect(e.prototype,"goldman.Gold1")}(goldman||(goldman={}));var goldman;!function(t){var e=function(t){function e(e,o){return t.call(this,"Gold2",e,o)||this}return __extends(e,t),e}(t.Obj);t.Gold2=e,__reflect(e.prototype,"goldman.Gold2")}(goldman||(goldman={}));var goldman;!function(t){var e=function(t){function e(e,o){return t.call(this,"Gold3",e,o)||this}return __extends(e,t),e}(t.Obj);t.Gold3=e,__reflect(e.prototype,"goldman.Gold3")}(goldman||(goldman={}));var goldman;!function(t){var e=function(){function e(){}return e.createImg=function(){var e=t.createBitmapByName("coin_png");t.GameManager.getInstance().GameStage.addChild(e);var o=t.GameManager.getInstance().GameStage_width/2-e.width/2,n=250,i=600,r=Math.round(40*Math.random()+1),a=Math.floor(-99*Math.random()+100),s=Math.round(4*Math.random()+1);1==s?(o-=r,n+=r):2==s?(o+=r,n-=r):3==s?(o+=r,n+=r):4==s&&(o-=r,n-=r),e.x=o,e.y=n;var h=function(){t.GameManager.getInstance().GameStage.contains(e)&&(t.GameManager.getInstance().GameStage.removeChild(e),e=null)},l=function(){egret.Tween.get(e).to({alpha:0},500).call(h,this)};e.visible=!0;var c={x:210,y:40};egret.Tween.get(e).wait(a).to({y:300,alpha:1},300,egret.Ease.sineIn).wait(100).to({x:c.x,y:c.y,alpha:1},i,egret.Ease.sineOut).call(l,this)},e}();t.GoldEffectUtils=e,__reflect(e.prototype,"goldman.GoldEffectUtils")}(goldman||(goldman={}));var goldman;!function(t){var e=function(e){function o(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(o,e),o.prototype.onAddToStage=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.line=new egret.Shape,this.addChild(this.line),this._hookBmp=t.createBitmapByName("hook_png"),this.addChild(this._hookBmp)},o.prototype.setBackHookType=function(e){void 0===e&&(e=""),e?(this._backHookBmp=t.createBitmapByName(e+"_Back"),this.addChild(this._backHookBmp),this._backHookBmp.x=this._hookBmp.x,this._backHookBmp.y=this._hookBmp.y,this._hookBmp.visible=!1):(this._backHookBmp&&this.contains(this._backHookBmp)&&(this.removeChild(this._backHookBmp),this._backHookBmp=null),this._hookBmp.visible=!0)},o.prototype.redrawHook=function(t){void 0===t&&(t=0),this._hookBmp.y=t,this.line.graphics.clear(),this.line.graphics.lineStyle(3,3946561),this.line.graphics.moveTo(0,0),this.line.graphics.lineTo(0,t),this.line.graphics.endFill();for(var e=10;t>=e;e+=10)this.line.graphics.beginFill(3946561),this.line.graphics.drawCircle(0,e,3),this.line.graphics.endFill();this._hookBmp.x=-this._hookBmp.width/2,this._backHookBmp&&(this._backHookBmp.y=t,this._backHookBmp.x=-this._backHookBmp.width/2)},Object.defineProperty(o.prototype,"hookBmp",{get:function(){return this._hookBmp},enumerable:!0,configurable:!0}),o.prototype.destroy=function(){this.removeChild(this.line),this.line=null,this.removeChild(this._hookBmp),this._hookBmp=null,this._backHookBmp&&this.contains(this._backHookBmp)&&(this.removeChild(this._backHookBmp),this._backHookBmp=null)},o}(egret.Sprite);t.Hook=e,__reflect(e.prototype,"goldman.Hook")}(goldman||(goldman={}));var goldman;!function(t){var e=function(e){function o(){var t=e.call(this)||this;return t.BASE_ROTATION_MAX=60,t.LINE_HEIGHT_DEFAULT=30,t.GO_V_DEFAULT=8,t.BACK_V_DEFAULT=10,t.isGo=!1,t.isBack=!1,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(o,e),o.prototype.onAddToStage=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.createHook(),this.lineHeight=this.LINE_HEIGHT_DEFAULT,this.hook.redrawHook(this.LINE_HEIGHT_DEFAULT),this.startRotate()},o.prototype.createHook=function(){this.hook=new t.Hook,this.addChild(this.hook),this.goV=this.GO_V_DEFAULT,this.backV=this.BACK_V_DEFAULT},o.prototype.onUpdateEnterFrame=function(){this.onUpdateRotation(),this.isGo&&this.onUpdateGo()},o.prototype.startRotate=function(){this.direction="left"},o.prototype.onUpdateRotation=function(){"left"==this.direction?this.hook.rotation+=1.5:"right"==this.direction&&(this.hook.rotation-=1.5),"stop"!=this.direction&&(this.hook.rotation<-this.BASE_ROTATION_MAX?this.direction="left":this.hook.rotation>this.BASE_ROTATION_MAX&&(this.direction="right"))},o.prototype.startGo=function(){this.isGo=!0,this.direction="stop",t.SoundManager.getInstance().PlayPull()},o.prototype.onUpdateGo=function(){var e=this.goV;if(this.isBack&&(e=-this.backV),this.lineHeight+=e,this.hook.redrawHook(this.lineHeight),this.dispatchEventWith(o.HOOK_MANAGER_EVENT,!1,{type:o.UPDATE_HOOK_POSITION_EVENT,hook:this.hook,hookBmp:this.hook.hookBmp}),this.lineHeight<this.LINE_HEIGHT_DEFAULT&&this.goComplete(),!this.isBack){var n=this.getHookPoint();(n.x<0||n.x>t.GameManager.getInstance().GameStage_width||n.y>t.GameManager.getInstance().GameStage_height)&&(this.isBack=!0,this.backV=this.BACK_V_DEFAULT)}},o.prototype.getHookPoint=function(){return this.hook.localToGlobal(this.hook.hookBmp.x,this.hook.hookBmp.y)},o.prototype.setHookBackV=function(e){this.isBack=!0,this.backV=e,t.SoundManager.getInstance().StopPull(),t.SoundManager.getInstance().PlayDig()},o.prototype.goComplete=function(){this.dispatchEventWith(o.HOOK_MANAGER_EVENT,!1,{type:o.GO_COMPLETE_EVENT,catchObj:this.catchObj}),this.hook.setBackHookType(),this.lineHeight=this.LINE_HEIGHT_DEFAULT,this.hook.redrawHook(this.lineHeight),this.isGo=!1,this.isBack=!1,this.startRotate(),this.catchObj=null,t.SoundManager.getInstance().StopDig(),t.SoundManager.getInstance().StopPull()},o.prototype.setCatchObj=function(t){this.catchObj=t;var e=t.type;console.log("catchObj.type: "+e),this.hook.setBackHookType(e)},o.prototype.destroy=function(){console.log("删除hook"),this.hook.destroy(),this.removeChild(this.hook),this.hook=null,this.catchObj=null},o.HOOK_MANAGER_EVENT="HOOK_MANAGER_EVENT",o.GO_COMPLETE_EVENT="GO_COMPLETE_EVENT",o.UPDATE_HOOK_POSITION_EVENT="UPDATE_HOOK_POSITION_EVENT",o}(egret.Sprite);t.HookManager=e,__reflect(e.prototype,"goldman.HookManager")}(goldman||(goldman={}));var goldman;!function(t){var e=function(){function t(){this.loader=new egret.URLLoader}return t.create=function(){return new t},t.prototype.success=function(t,e){return void 0===e&&(e=null),this.loader.addEventListener(egret.Event.COMPLETE,function(o){var n=o.target;t.call(e,n.data)},e),this},t.prototype.error=function(t,e){return void 0===e&&(e=null),this.loader.addEventListener(egret.IOErrorEvent.IO_ERROR,t,e),this},t.prototype.add=function(t){return this.variables||(this.variables=new egret.URLVariables),this.variables.decode(t),this},t.prototype.dataFormat=function(t){return this.loader.dataFormat=t,this},t.prototype.get=function(t){var e=new egret.URLRequest(t);this.variables&&(e.data=this.variables),this.loader.load(e)},t.prototype.post=function(t){var e=new egret.URLRequest(t);e.method=egret.URLRequestMethod.POST,this.variables&&(e.data=this.variables),this.loader.load(e)},t}();t.Http=e,__reflect(e.prototype,"goldman.Http")}(goldman||(goldman={}));var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,o){function n(n){e.call(o,n,t)}if(RES.hasRes(t)){var i=RES.getRes(t);i?n(i):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var goldman;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._objsArr=[],e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.objsConfig=RES.getRes("objsConfig_json"),console.log("=========>",this.objsConfig)},e.prototype.createObjs=function(t){for(var e=0;e<t.length;e++){var o=t[e],n=o.name,i=this.objsConfig[n].money,r=this.objsConfig[n].backV,a=egret.getDefinitionByName("goldman."+n),s=new a(i,r);s.x=o.x,s.y=o.y,this._objsArr.push(s),this.addChild(s)}},Object.defineProperty(e.prototype,"objsArr",{get:function(){return this._objsArr},enumerable:!0,configurable:!0}),e.prototype.removeObjsAtAreaByHitObj=function(t){if("TNT"==t.type){var e=[];for(var o in this._objsArr){var n=this._objsArr[o];if(n!==t){var i=new egret.Point(n.x+n.width/2,n.y+n.height/2),r=new egret.Point(t.x+n.width/2,t.y+n.height/2),a=egret.Point.distance(i,r);200>=a&&e.push(n)}}for(var o in e){var n=e[o];n.destory(),this.removeObj(n)}}},e.prototype.removeObj=function(t){console.log("从数组中removeObj");var e=this._objsArr.splice(this._objsArr.indexOf(t),1)[0];return this.removeChild(e),e},e.prototype.destroy=function(){for(var t in this._objsArr){var e=this._objsArr[t];this.removeChild(e),e.destory()}this._objsArr=[]},e.OBJ_MANAGER_EVENT="OBJ_MANAGER_EVENT",e}(egret.Sprite);t.ObjManager=e,__reflect(e.prototype,"goldman.ObjManager")}(goldman||(goldman={}));var goldman;!function(t){var e=function(){function t(){this._click=new egret.Sound,this._click.load("resource/sound/button.mp3"),this._bgm=new egret.Sound,this._bgm.load("resource/sound/bgm.mp3"),this._score=new egret.Sound,this._score.load("resource/sound/score.mp3"),this._pull=new egret.Sound,this._pull.load("resource/sound/pull.mp3"),this._dig=new egret.Sound,this._dig.load("resource/sound/dig.mp3"),this._lastsound=new egret.Sound,this._lastsound.load("resource/sound/last-10s-sound.mp3")}return t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.PlayBGM=function(){this.IsMusic&&(this._bgm_channel=this._bgm.play(0,0))},t.prototype.StopBGM=function(){null!=this._bgm_channel&&this._bgm_channel.stop()},t.prototype.PlayClick=function(){this.IsSound&&this._click.play(0,1)},t.prototype.PlayScore=function(){this.IsSound&&this._score.play(0,1)},t.prototype.PlayPull=function(){this.IsSound&&(this._pull_channel=this._pull.play(0,0))},t.prototype.StopPull=function(){null!=this._pull_channel&&this._pull_channel.stop()},t.prototype.PlayDig=function(){this.IsSound&&(this._dig_channel=this._dig.play(0,0))},t.prototype.StopDig=function(){null!=this._dig_channel&&this._dig_channel.stop()},t.prototype.PlayLastSound=function(){this.IsSound&&this._lastsound.play(0,1)},Object.defineProperty(t.prototype,"IsMusic",{get:function(){var t=egret.localStorage.getItem("ismusic");return null==t||""==t?!0:"1"==t},set:function(t){t?(egret.localStorage.setItem("ismusic","1"),this.PlayBGM()):(egret.localStorage.setItem("ismusic","0"),this.StopBGM())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsSound",{get:function(){var t=egret.localStorage.getItem("isSound");return null==t||""==t?!0:"1"==t},set:function(t){t?egret.localStorage.setItem("isSound","1"):egret.localStorage.setItem("isSound","0")},enumerable:!0,configurable:!0}),t}();t.SoundManager=e,__reflect(e.prototype,"goldman.SoundManager")}(goldman||(goldman={}));